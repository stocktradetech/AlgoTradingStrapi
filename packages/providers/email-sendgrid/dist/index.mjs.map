{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import sendgrid, { MailDataRequired } from '@sendgrid/mail';\n\ninterface Settings {\n  defaultFrom: string;\n  defaultReplyTo: string;\n}\n\ninterface SendOptions {\n  from?: string;\n  to: string;\n  cc: string;\n  bcc: string;\n  replyTo?: string;\n  subject: string;\n  text: string;\n  html: string;\n  [key: string]: unknown;\n}\n\ninterface ProviderOptions {\n  apiKey: string;\n}\n\nexport default {\n  init(providerOptions: ProviderOptions, settings: Settings) {\n    sendgrid.setApiKey(providerOptions.apiKey);\n\n    return {\n      send(options: SendOptions): Promise<void> {\n        return new Promise((resolve, reject) => {\n          const { from, to, cc, bcc, replyTo, subject, text, html, ...rest } = options;\n\n          const msg: MailDataRequired = {\n            from: from || settings.defaultFrom,\n            to,\n            cc,\n            bcc,\n            replyTo: replyTo || settings.defaultReplyTo,\n            subject,\n            text,\n            html,\n            ...rest,\n          };\n\n          sendgrid.send(msg, false, (err) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        });\n      },\n    };\n  },\n};\n"],"names":[],"mappings":";AAuBA,MAAe,QAAA;AAAA,EACb,KAAK,iBAAkC,UAAoB;AAChD,aAAA,UAAU,gBAAgB,MAAM;AAElC,WAAA;AAAA,MACL,KAAK,SAAqC;AACxC,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAChC,gBAAA,EAAE,MAAM,IAAI,IAAI,KAAK,SAAS,SAAS,MAAM,MAAM,GAAG,KAAA,IAAS;AAErE,gBAAM,MAAwB;AAAA,YAC5B,MAAM,QAAQ,SAAS;AAAA,YACvB;AAAA,YACA;AAAA,YACA;AAAA,YACA,SAAS,WAAW,SAAS;AAAA,YAC7B;AAAA,YACA;AAAA,YACA;AAAA,YACA,GAAG;AAAA,UAAA;AAGL,mBAAS,KAAK,KAAK,OAAO,CAAC,QAAQ;AACjC,gBAAI,KAAK;AACP,qBAAO,GAAG;AAAA,YAAA,OACL;AACG;YACV;AAAA,UAAA,CACD;AAAA,QAAA,CACF;AAAA,MACH;AAAA,IAAA;AAAA,EAEJ;AACF;"}